<turbo-frame id="messages_frame">
  <header class="px-6 py-3 border-b border-slate-200 bg-white/60 backdrop-blur-sm">
    <h2 class="text-lg font-semibold"> <%= channel.name %> </h2>
    <p class="text-xs text-slate-500">channel description</p>
  </header>
  <div class="h-100 overflow-y-auto bg-gray-100 p-4" id="chat-box" data-controller="infinite" data-infinite-target="box" data-load-more-url="<%= load_more_channel_path(channel)%>">
    <% if messages.empty? %>
      <div class="text-center text-slate-500 py-12"> no messages yet </div>
    <% else %> <% messages.each do |msg| %>
        <%= render partial: "message_item", locals: { message: msg } %>
      <% end %>
    <% end %>
  </div>
  <%= form_with model: new_message,
         local: true, 
         class: "border-t border-slate-200 p-4 bg-white" do |f| %>
    <%= f.hidden_field :channel_id, value: channel.id %>
    <%= f.hidden_field :user_id, value: current_user.id %>
    <div class="max-w-3xl mx-auto flex gap-3 items-center">
      <%= f.text_field :content,
                placeholder: "message #{channel.name}",
                class: "flex-1 rounded-md px-3 py-2 border border-slate-200 focus:ring-2 focus:ring-slate-300" %>
      <%= f.submit "send",
                class: "w-full sm:w-auto rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white inline-block font-medium cursor-pointer" %>
    </div>
  <% end %>
</turbo_frame>
